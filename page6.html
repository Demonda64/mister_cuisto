<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mister Cuisto</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Dancing+Script" rel="stylesheet">
</head>

<header class="entet">
    <img src="images/logo_header.png" width="500" />
</header>

<body>
    <div class="menu">
        <ul>
            <li>
                <a href="index.html">Accueil</a>
            </li>
            <li>
                <a href="page2.html">La Carte</a>
            </li>
            <li>
                <a href="page3.html">Le Chef</a>

            </li>
            <li>
                <a href="page4.html">Valeurs</a>

            </li>
            <li>
                <a href="page5.html">Contact</a>
            </li>
            <li>
                <a href="page6.html">Livre d'or</a>
            </li>
        </ul>
    </div>
    <section>
        <form id="Myform">

            <label for="nom">Entrez votre nom:</label>
            <input type="text" name="nom" id="nom" placeholder="Nom" />
            <span class="tooltip">Un nom ne peut pas faire moins de 2 caractères</span>

            <label for="email">Entrez votre email:</label>
            <input type="email" name="email" id="email" placeholder="E-mail (obligatoire)" required="required" maxlength="20" />

            <label for="Commentaire">Lachez un com'</label>
            <textarea rows="15" name="commentaire" id="commentaire" placeholder="Faites un commentaire(obligatoire)" required></textarea>

            <button type="submit" value="Valider" id="bouton_envoi" class="bouton bouton-valider">
                <img src="images/icone_valider.png" alt="Valider" />
                <p>Valider</p>
            </button>

            <button type="reset" class="bouton bouton-supprimer">
                <img src="images/icone_supprimer.png" alt="Supprimer" />
                <p>Supprimer</p>
            </button>

            <a href="index.html" class="bouton bouton-suivant">
                <img src="images/icone_suivante.png" alt="Accueil" />
                <p>Retour à l'acceuil</p>
            </a>
        </form>

        <script>
        
        
        // Fonction de désactivation de l'affichage des "tooltips"

function deactivateTooltips() {

var tooltips = document.querySelectorAll('.tooltip'),
    tooltipsLength = tooltips.length;

for (var i = 0; i < tooltipsLength; i++) {
    tooltips[i].style.display = 'block';
}


// La fonction ci-dessous permet de récupérer la "tooltip" qui correspond à notre input

function getTooltip(elements) {

while (elements = elements.nextSibling) {
    
    if (elements.className === '.tooltip') {
        
        return elements;
    }
}

return false;

}

check['nom'] = function(id) {

var name = document.getElementById(nom),
    tooltipStyle = getTooltip(name).style;

if (nom.value.length >= 2) {
    name.className = 'correct';
    tooltipStyle.display = 'none';
    return true;
} 

else {
    name.className = 'incorrect';
    tooltipStyle.display = 'inline-block';
    return false;
}
(function() { // Utilisation d'une IIFE pour éviter les variables globales.

var myForm = document.getElementById('myForm'),
    inputs = document.querySelectorAll('input[type=text], input[type=password]'),
    inputsLength = inputs.length;

for (var i = 0; i < inputsLength; i++) {
    inputs[i].addEventListener('keyup', function(e) {
        check[e.target.id](e.target.id); // "e.target" représente l'input actuellement modifié
    });
}

myForm.addEventListener('submit', function(e) {

    var result = true;

    for (var i in check) {
        result = check[i](i) && result;
    }

    if (result) {
        alert('Le formulaire est bien rempli.');
    }

    e.preventDefault();

});

myForm.addEventListener('reset', function() {

    for (var i = 0; i < inputsLength; i++) {
        inputs[i].className = '';
    }

    deactivateTooltips();

});

})();


// Maintenant que tout est initialisé, on peut désactiver les "tooltips"

deactivateTooltips();
        </script>

        

    </section>

</body>

</html>